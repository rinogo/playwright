<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="search" type="application/opensearchdescription+xml" title="Playwright" href="/playwright/opensearch.xml">
<script src="js/redirection.js"></script><title data-react-helmet="true">class: BrowserContext | Playwright</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="class: BrowserContext | Playwright"><meta data-react-helmet="true" name="description" content="* extends: EventEmitter"><meta data-react-helmet="true" property="og:description" content="* extends: EventEmitter"><meta data-react-helmet="true" property="og:url" content="https://microsoft.github.io/playwright/docs/next/api/class-browsercontext"><link data-react-helmet="true" rel="shortcut icon" href="/playwright/img/playwright-logo.svg"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://microsoft.github.io/playwright/docs/next/api/class-browsercontext"><link rel="stylesheet" href="/playwright/styles.fe0d5519.css">
<link rel="preload" href="/playwright/styles.e3676b2d.js" as="script">
<link rel="preload" href="/playwright/runtime~main.a5e53a7b.js" as="script">
<link rel="preload" href="/playwright/main.07a96fdf.js" as="script">
<link rel="preload" href="/playwright/1.e3d59386.js" as="script">
<link rel="preload" href="/playwright/2.50efd8bb.js" as="script">
<link rel="preload" href="/playwright/339.77409837.js" as="script">
<link rel="preload" href="/playwright/342.4e5598e3.js" as="script">
<link rel="preload" href="/playwright/935f2afb.ea0d6419.js" as="script">
<link rel="preload" href="/playwright/17896441.27de16b4.js" as="script">
<link rel="preload" href="/playwright/efa29c67.8dc1c23b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/playwright/"><img class="navbar__logo" src="/playwright/img/playwright-logo.svg" alt="Playwright logo"><strong class="navbar__title">Playwright</strong></a><a class="navbar__item navbar__link" href="/playwright/docs/next/intro">Docs</a><a class="navbar__item navbar__link navbar__link--active" href="/playwright/docs/next/api/playwright-module">API</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/playwright/docs/next/why-playwright">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/playwright/docs/next/api/class-browsercontext">Next</a></li><li><a class="dropdown__link" href="/playwright/docs/api/class-browsercontext">1.6.0</a></li><li><a class="dropdown__link" href="/playwright/docs/1.5.0/api/class-browsercontext">1.5.0</a></li><li><a class="dropdown__link" href="/playwright/docs/1.2.0/api/class-browsercontext">1.2.0</a></li><li><a class="dropdown__link" href="/playwright/docs/1.1.0/api/class-browsercontext">1.1.0</a></li><li><a class="dropdown__link" href="/playwright/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/playwright/blog">Blog</a><a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/playwright/"><img class="navbar__logo" src="/playwright/img/playwright-logo.svg" alt="Playwright logo"><strong class="navbar__title">Playwright</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/next/intro">Docs</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/playwright/docs/next/api/playwright-module">API</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/playwright/docs/next/api/class-browsercontext">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/api/class-browsercontext">1.6.0</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/1.5.0/api/class-browsercontext">1.5.0</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/1.2.0/api/class-browsercontext">1.2.0</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/1.1.0/api/class-browsercontext">1.1.0</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/versions">All versions</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">API reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/playwright-module">Playwright module</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-browser">class: Browser</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/playwright/docs/next/api/class-browsercontext">class: BrowserContext</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-page">class: Page</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-frame">class: Frame</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-elementhandle">class: ElementHandle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-jshandle">class: JSHandle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-consolemessage">class: ConsoleMessage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-dialog">class: Dialog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-download">class: Download</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-video">class: Video</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-filechooser">class: FileChooser</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-keyboard">class: Keyboard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-mouse">class: Mouse</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-touchscreen">class: Touchscreen</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-request">class: Request</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-response">class: Response</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-selectors">class: Selectors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-route">class: Route</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-websocket">class: WebSocket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-timeouterror">class: TimeoutError</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-accessibility">class: Accessibility</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-worker">class: Worker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-browserserver">class: BrowserServer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-browsertype">class: BrowserType</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-logger">class: Logger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-chromiumbrowser">class: ChromiumBrowser</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-chromiumbrowsercontext">class: ChromiumBrowserContext</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-chromiumcoverage">class: ChromiumCoverage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-cdpsession">class: CDPSession</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-firefoxbrowser">class: FirefoxBrowser</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/class-webkitbrowser">class: WebKitBrowser</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/evaluationargument">EvaluationArgument</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/environment-variables">Environment Variables</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/working-with-selectors">Working with selectors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/next/api/working-with-chrome-extensions">Working with Chrome Extensions</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Playwright <strong>Next</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/playwright/docs/api/class-browsercontext">latest version</a></strong> (1.6.0).</div></div><div class="docItemContainer_3QWW"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_1Lrw">class: BrowserContext</h1></header><div class="markdown"><ul><li>extends: <a href="https://nodejs.org/api/events.html#events_class_eventemitter">EventEmitter</a></li></ul><p>BrowserContexts provide a way to operate multiple independent browser sessions.</p><p>If a page opens another page, e.g. with a <code>window.open</code> call, the popup will belong to the parent page&#x27;s browser
context.</p><p>Playwright allows creation of &quot;incognito&quot; browser contexts with <code>browser.newContext()</code> method.
&quot;Incognito&quot; browser contexts don&#x27;t write any browsing data to disk.</p><pre><code class="language-js">// Create a new incognito browser context
const context = await browser.newContext();
// Create a new page inside context.
const page = await context.newPage();
await page.goto(&#x27;https://example.com&#x27;);
// Dispose context once it&#x27;s no longer needed.
await context.close();
</code></pre><ul><li><a href="#event-close">event: &#x27;close&#x27;</a></li><li><a href="#event-page">event: &#x27;page&#x27;</a></li><li><a href="#browsercontextaddcookiescookies">browserContext.addCookies(cookies)</a></li><li><a href="#browsercontextaddinitscriptscript-arg">browserContext.addInitScript(script[, arg])</a></li><li><a href="#browsercontextbrowser">browserContext.browser()</a></li><li><a href="#browsercontextclearcookies">browserContext.clearCookies()</a></li><li><a href="#browsercontextclearpermissions">browserContext.clearPermissions()</a></li><li><a href="#browsercontextclose">browserContext.close()</a></li><li><a href="#browsercontextcookiesurls">browserContext.cookies([urls])</a></li><li><a href="#browsercontextexposebindingname-playwrightbinding-options">browserContext.exposeBinding(name, playwrightBinding[, options])</a></li><li><a href="#browsercontextexposefunctionname-playwrightfunction">browserContext.exposeFunction(name, playwrightFunction)</a></li><li><a href="#browsercontextgrantpermissionspermissions-options">browserContext.grantPermissions(permissions[][, options])</a></li><li><a href="#browsercontextnewpage">browserContext.newPage()</a></li><li><a href="#browsercontextpages">browserContext.pages()</a></li><li><a href="#browsercontextrouteurl-handler">browserContext.route(url, handler)</a></li><li><a href="#browsercontextsetdefaultnavigationtimeouttimeout">browserContext.setDefaultNavigationTimeout(timeout)</a></li><li><a href="#browsercontextsetdefaulttimeouttimeout">browserContext.setDefaultTimeout(timeout)</a></li><li><a href="#browsercontextsetextrahttpheadersheaders">browserContext.setExtraHTTPHeaders(headers)</a></li><li><a href="#browsercontextsetgeolocationgeolocation">browserContext.setGeolocation(geolocation)</a></li><li><a href="#browsercontextsethttpcredentialshttpcredentials">browserContext.setHTTPCredentials(httpCredentials)</a></li><li><a href="#browsercontextsetofflineoffline">browserContext.setOffline(offline)</a></li><li><a href="#browsercontextunrouteurl-handler">browserContext.unroute(url[, handler])</a></li><li><a href="#browsercontextwaitforeventevent-optionsorpredicate">browserContext.waitForEvent(event[, optionsOrPredicate])</a></li></ul><h2 id="event-close">event: &#x27;close&#x27;</h2><p>Emitted when Browser context gets closed. This might happen because of one of the following:</p><ul><li>Browser context is closed.</li><li>Browser application is closed or crashed.</li><li>The <a href="#browserclose"><code>browser.close</code></a> method was called.</li></ul><h2 id="event-page">event: &#x27;page&#x27;</h2><ul><li>&lt;[Page]&gt;</li></ul><p>The event is emitted when a new Page is created in the BrowserContext. The page may still be loading. The event will also fire for popup pages. See also <a href="#event-popup"><code>Page.on(&#x27;popup&#x27;)</code></a> to receive events about popups relevant to a specific page.</p><p>The earliest moment that page is available is when it has navigated to the initial url. For example, when opening a popup with <code>window.open(&#x27;http://example.com&#x27;)</code>, this event will fire when the network request to &quot;<a href="http://example.com%22">http://example.com&quot;</a> is done and its response has started loading in the popup.</p><pre><code class="language-js">const [page] = await Promise.all([
  context.waitForEvent(&#x27;page&#x27;),
  page.click(&#x27;a[target=_blank]&#x27;),
]);
console.log(await page.evaluate(&#x27;location.href&#x27;));
</code></pre><blockquote><p><strong>NOTE</strong> Use <a href="#pagewaitforloadstatestate-options"><code>page.waitForLoadState([state[, options]])</code></a> to wait until the page gets to a particular state (you should not need it in most cases).</p></blockquote><h2 id="browsercontextaddcookiescookies">browserContext.addCookies(cookies)</h2><ul><li><code>cookies</code> &lt;[Array]&lt;[Object]&gt;&gt;<ul><li><code>name</code> &lt;[string]&gt; <strong>required</strong></li><li><code>value</code> &lt;[string]&gt; <strong>required</strong></li><li><code>url</code> &lt;[string]&gt; either url or domain / path are required</li><li><code>domain</code> &lt;[string]&gt; either url or domain / path are required</li><li><code>path</code> &lt;[string]&gt; either url or domain / path are required</li><li><code>expires</code> &lt;[number]&gt; Unix time in seconds.</li><li><code>httpOnly</code> &lt;[boolean]&gt;</li><li><code>secure</code> &lt;[boolean]&gt;</li><li><code>sameSite</code> &lt;&quot;Strict&quot;|&quot;Lax&quot;|&quot;None&quot;&gt;</li></ul></li><li>returns: &lt;[Promise]&gt;</li></ul><pre><code class="language-js">await browserContext.addCookies([cookieObject1, cookieObject2]);
</code></pre><h2 id="browsercontextaddinitscriptscript-arg">browserContext.addInitScript(script[, arg])</h2><ul><li><code>script</code> &lt;[function]|[string]|[Object]&gt; Script to be evaluated in all pages in the browser context.<ul><li><code>path</code> &lt;[string]&gt; Path to the JavaScript file. If <code>path</code> is a relative path, then it is resolved relative to <a href="https://nodejs.org/api/process.html#process_process_cwd">current working directory</a>.</li><li><code>content</code> &lt;[string]&gt; Raw script content.</li></ul></li><li><code>arg</code> &lt;[Serializable]&gt; Optional argument to pass to <code>script</code> (only supported when passing a function).</li><li>returns: &lt;[Promise]&gt;</li></ul><p>Adds a script which would be evaluated in one of the following scenarios:</p><ul><li>Whenever a page is created in the browser context or is navigated.</li><li>Whenever a child frame is attached or navigated in any page in the browser context. In this case, the script is evaluated in the context of the newly attached frame.</li></ul><p>The script is evaluated after the document was created but before any of its scripts were run. This is useful to amend  the JavaScript environment, e.g. to seed <code>Math.random</code>.</p><p>An example of overriding <code>Math.random</code> before the page loads:</p><pre><code class="language-js">// preload.js
Math.random = () =&gt; 42;
</code></pre><pre><code class="language-js">// In your playwright script, assuming the preload.js file is in same directory.
await browserContext.addInitScript({
  path: &#x27;preload.js&#x27;
});
</code></pre><blockquote><p><strong>NOTE</strong> The order of evaluation of multiple scripts installed via <a href="#browsercontextaddinitscriptscript-arg">browserContext.addInitScript(script[, arg])</a> and <a href="#pageaddinitscriptscript-arg">page.addInitScript(script[, arg])</a> is not defined.</p></blockquote><h2 id="browsercontextbrowser">browserContext.browser()</h2><ul><li>returns: &lt;[null]|[Browser]&gt; Returns the browser instance of the context. If it was launched as a persistent context null gets returned.</li></ul><h2 id="browsercontextclearcookies">browserContext.clearCookies()</h2><ul><li>returns: &lt;[Promise]&gt;</li></ul><p>Clears context cookies.</p><h2 id="browsercontextclearpermissions">browserContext.clearPermissions()</h2><ul><li>returns: &lt;[Promise]&gt;</li></ul><p>Clears all permission overrides for the browser context.</p><pre><code class="language-js">const context = await browser.newContext();
await context.grantPermissions([&#x27;clipboard-read&#x27;]);
// do stuff ..
context.clearPermissions();
</code></pre><h2 id="browsercontextclose">browserContext.close()</h2><ul><li>returns: &lt;[Promise]&gt;</li></ul><p>Closes the browser context. All the pages that belong to the browser context
will be closed.</p><blockquote><p><strong>NOTE</strong> the default browser context cannot be closed.</p></blockquote><h2 id="browsercontextcookiesurls">browserContext.cookies([urls])</h2><ul><li><code>urls</code> &lt;[string]|[Array]&lt;[string]&gt;&gt;</li><li>returns: &lt;[Promise]&lt;[Array]&lt;[Object]&gt;&gt;&gt;<ul><li><code>name</code> &lt;[string]&gt;</li><li><code>value</code> &lt;[string]&gt;</li><li><code>domain</code> &lt;[string]&gt;</li><li><code>path</code> &lt;[string]&gt;</li><li><code>expires</code> &lt;[number]&gt; Unix time in seconds.</li><li><code>httpOnly</code> &lt;[boolean]&gt;</li><li><code>secure</code> &lt;[boolean]&gt;</li><li><code>sameSite</code> &lt;&quot;Strict&quot;|&quot;Lax&quot;|&quot;None&quot;&gt;</li></ul></li></ul><p>If no URLs are specified, this method returns all cookies.
If URLs are specified, only cookies that affect those URLs are returned.</p><h2 id="browsercontextexposebindingname-playwrightbinding-options">browserContext.exposeBinding(name, playwrightBinding[, options])</h2><ul><li><code>name</code> &lt;[string]&gt; Name of the function on the window object.</li><li><code>playwrightBinding</code> &lt;[function]&gt; Callback function that will be called in the Playwright&#x27;s context.</li><li><code>options</code> &lt;[Object]&gt;<ul><li><code>handle</code> &lt;[boolean]&gt; Whether to pass the argument as a handle, instead of passing by value. When passing a handle, only one argument is supported. When passing by value, multiple arguments are supported.</li></ul></li><li>returns: &lt;[Promise]&gt;</li></ul><p>The method adds a function called <code>name</code> on the <code>window</code> object of every frame in every page in the context.
When called, the function executes <code>playwrightBinding</code> in Node.js and returns a [Promise] which resolves to the return value of <code>playwrightBinding</code>.
If the <code>playwrightBinding</code> returns a [Promise], it will be awaited.</p><p>The first argument of the <code>playwrightBinding</code> function contains information about the caller:
<code>{ browserContext: BrowserContext, page: Page, frame: Frame }</code>.</p><p>See <a href="#pageexposebindingname-playwrightbinding-options">page.exposeBinding(name, playwrightBinding)</a> for page-only version.</p><p>An example of exposing page URL to all frames in all pages in the context:</p><pre><code class="language-js">const { webkit } = require(&#x27;playwright&#x27;);  // Or &#x27;chromium&#x27; or &#x27;firefox&#x27;.

(async () =&gt; {
  const browser = await webkit.launch({ headless: false });
  const context = await browser.newContext();
  await context.exposeBinding(&#x27;pageURL&#x27;, ({ page }) =&gt; page.url());
  const page = await context.newPage();
  await page.setContent(`
    &lt;script&gt;
      async function onClick() {
        document.querySelector(&#x27;div&#x27;).textContent = await window.pageURL();
      }
    &lt;/script&gt;
    &lt;button onclick=&quot;onClick()&quot;&gt;Click me&lt;/button&gt;
    &lt;div&gt;&lt;/div&gt;
  `);
  await page.click(&#x27;button&#x27;);
})();
</code></pre><p>An example of passing an element handle:</p><pre><code class="language-js">await context.exposeBinding(&#x27;clicked&#x27;, async (source, element) =&gt; {
  console.log(await element.textContent());
}, { handle: true });
await page.setContent(`
  &lt;script&gt;
    document.addEventListener(&#x27;click&#x27;, event =&gt; window.clicked(event.target));
  &lt;/script&gt;
  &lt;div&gt;Click me&lt;/div&gt;
  &lt;div&gt;Or click me&lt;/div&gt;
`);
</code></pre><h2 id="browsercontextexposefunctionname-playwrightfunction">browserContext.exposeFunction(name, playwrightFunction)</h2><ul><li><code>name</code> &lt;[string]&gt; Name of the function on the window object.</li><li><code>playwrightFunction</code> &lt;[function]&gt; Callback function that will be called in the Playwright&#x27;s context.</li><li>returns: &lt;[Promise]&gt;</li></ul><p>The method adds a function called <code>name</code> on the <code>window</code> object of every frame in every page in the context.
When called, the function executes <code>playwrightFunction</code> in Node.js and returns a [Promise] which resolves to the return value of <code>playwrightFunction</code>.</p><p>If the <code>playwrightFunction</code> returns a [Promise], it will be awaited.</p><p>See <a href="#pageexposefunctionname-playwrightfunction">page.exposeFunction(name, playwrightFunction)</a> for page-only version.</p><p>An example of adding an <code>md5</code> function to all pages in the context:</p><pre><code class="language-js">const { webkit } = require(&#x27;playwright&#x27;);  // Or &#x27;chromium&#x27; or &#x27;firefox&#x27;.
const crypto = require(&#x27;crypto&#x27;);

(async () =&gt; {
  const browser = await webkit.launch({ headless: false });
  const context = await browser.newContext();
  await context.exposeFunction(&#x27;md5&#x27;, text =&gt; crypto.createHash(&#x27;md5&#x27;).update(text).digest(&#x27;hex&#x27;));
  const page = await context.newPage();
  await page.setContent(`
    &lt;script&gt;
      async function onClick() {
        document.querySelector(&#x27;div&#x27;).textContent = await window.md5(&#x27;PLAYWRIGHT&#x27;);
      }
    &lt;/script&gt;
    &lt;button onclick=&quot;onClick()&quot;&gt;Click me&lt;/button&gt;
    &lt;div&gt;&lt;/div&gt;
  `);
  await page.click(&#x27;button&#x27;);
})();
</code></pre><h2 id="browsercontextgrantpermissionspermissions">browserContext.grantPermissions(permissions[][, options])</h2><ul><li><code>permissions</code> &lt;[Array]&lt;[string]&gt;&gt; A permission or an array of permissions to grant. Permissions can be one of the following values:<ul><li><code>&#x27;geolocation&#x27;</code></li><li><code>&#x27;midi&#x27;</code></li><li><code>&#x27;midi-sysex&#x27;</code> (system-exclusive midi)</li><li><code>&#x27;notifications&#x27;</code></li><li><code>&#x27;push&#x27;</code></li><li><code>&#x27;camera&#x27;</code></li><li><code>&#x27;microphone&#x27;</code></li><li><code>&#x27;background-sync&#x27;</code></li><li><code>&#x27;ambient-light-sensor&#x27;</code></li><li><code>&#x27;accelerometer&#x27;</code></li><li><code>&#x27;gyroscope&#x27;</code></li><li><code>&#x27;magnetometer&#x27;</code></li><li><code>&#x27;accessibility-events&#x27;</code></li><li><code>&#x27;clipboard-read&#x27;</code></li><li><code>&#x27;clipboard-write&#x27;</code></li><li><code>&#x27;payment-handler&#x27;</code></li></ul></li><li><code>options</code> &lt;[Object]&gt;<ul><li><code>origin</code> &lt;[string]&gt; The [origin] to grant permissions to, e.g. &quot;<a href="https://example.com%22">https://example.com&quot;</a>.</li></ul></li><li>returns: &lt;[Promise]&gt;</li></ul><p>Grants specified permissions to the browser context. Only grants corresponding permissions to the given origin if specified.</p><h2 id="browsercontextnewpage">browserContext.newPage()</h2><ul><li>returns: &lt;[Promise]&lt;[Page]&gt;&gt;</li></ul><p>Creates a new page in the browser context.</p><h2 id="browsercontextpages">browserContext.pages()</h2><ul><li>returns: &lt;[Array]&lt;[Page]&gt;&gt; All open pages in the context. Non visible pages, such as <code>&quot;background_page&quot;</code>, will not be listed here. You can find them using <a href="#chromiumbrowsercontextbackgroundpages">chromiumBrowserContext.backgroundPages()</a>.</li></ul><h2 id="browsercontextrouteurl-handler">browserContext.route(url, handler)</h2><ul><li><code>url</code> &lt;[string]|[RegExp]|[function]([URL]):[boolean]&gt; A glob pattern, regex pattern or predicate receiving [URL] to match while routing.</li><li><code>handler</code> &lt;[function]([Route], [Request])&gt; handler function to route the request.</li><li>returns: &lt;[Promise]&gt;</li></ul><p>Routing provides the capability to modify network requests that are made by any page in the browser context.
Once route is enabled, every request matching the url pattern will stall unless it&#x27;s continued, fulfilled or aborted.</p><p>An example of a naÃ¯ve handler that aborts all image requests:</p><pre><code class="language-js">const context = await browser.newContext();
await context.route(&#x27;**/*.{png,jpg,jpeg}&#x27;, route =&gt; route.abort());
const page = await context.newPage();
await page.goto(&#x27;https://example.com&#x27;);
await browser.close();
</code></pre><p>or the same snippet using a regex pattern instead:</p><pre><code class="language-js">const context = await browser.newContext();
await context.route(/(\.png$)|(\.jpg$)/, route =&gt; route.abort());
const page = await context.newPage();
await page.goto(&#x27;https://example.com&#x27;);
await browser.close();
</code></pre><p>Page routes (set up with <a href="#pagerouteurl-handler">page.route(url, handler)</a>) take precedence over browser context routes when request matches both handlers.</p><blockquote><p><strong>NOTE</strong> Enabling routing disables http cache.</p></blockquote><h2 id="browsercontextsetdefaultnavigationtimeouttimeout">browserContext.setDefaultNavigationTimeout(timeout)</h2><ul><li><code>timeout</code> &lt;[number]&gt; Maximum navigation time in milliseconds</li></ul><p>This setting will change the default maximum navigation time for the following methods and related shortcuts:</p><ul><li><a href="#pagegobackoptions">page.goBack([options])</a></li><li><a href="#pagegoforwardoptions">page.goForward([options])</a></li><li><a href="#pagegotourl-options">page.goto(url[, options])</a></li><li><a href="#pagereloadoptions">page.reload([options])</a></li><li><a href="#pagesetcontenthtml-options">page.setContent(html[, options])</a></li><li><a href="#pagewaitfornavigationoptions">page.waitForNavigation([options])</a></li></ul><blockquote><p><strong>NOTE</strong> <a href="#pagesetdefaultnavigationtimeouttimeout"><code>page.setDefaultNavigationTimeout</code></a> and <a href="#pagesetdefaulttimeouttimeout"><code>page.setDefaultTimeout</code></a> take priority over <a href="#browsercontextsetdefaultnavigationtimeouttimeout"><code>browserContext.setDefaultNavigationTimeout</code></a>.</p></blockquote><h2 id="browsercontextsetdefaulttimeouttimeout">browserContext.setDefaultTimeout(timeout)</h2><ul><li><code>timeout</code> &lt;[number]&gt; Maximum time in milliseconds</li></ul><p>This setting will change the default maximum time for all the methods accepting <code>timeout</code> option.</p><blockquote><p><strong>NOTE</strong> <a href="#pagesetdefaultnavigationtimeouttimeout"><code>page.setDefaultNavigationTimeout</code></a>, <a href="#pagesetdefaulttimeouttimeout"><code>page.setDefaultTimeout</code></a> and <a href="#browsercontextsetdefaultnavigationtimeouttimeout"><code>browserContext.setDefaultNavigationTimeout</code></a> take priority over <a href="#browsercontextsetdefaulttimeouttimeout"><code>browserContext.setDefaultTimeout</code></a>.</p></blockquote><h2 id="browsercontextsetextrahttpheadersheaders">browserContext.setExtraHTTPHeaders(headers)</h2><ul><li><code>headers</code> &lt;[Object]&lt;[string], [string]&gt;&gt; An object containing additional HTTP headers to be sent with every request. All header values must be strings.</li><li>returns: &lt;[Promise]&gt;</li></ul><p>The extra HTTP headers will be sent with every request initiated by any page in the context. These headers are merged with page-specific extra HTTP headers set with <a href="#pagesetextrahttpheadersheaders">page.setExtraHTTPHeaders()</a>. If page overrides a particular header, page-specific header value will be used instead of the browser context header value.</p><blockquote><p><strong>NOTE</strong> <code>browserContext.setExtraHTTPHeaders</code> does not guarantee the order of headers in the outgoing requests.</p></blockquote><h2 id="browsercontextsetgeolocationgeolocation">browserContext.setGeolocation(geolocation)</h2><ul><li><code>geolocation</code> &lt;[null]|[Object]&gt;<ul><li><code>latitude</code> &lt;[number]&gt; Latitude between -90 and 90. <strong>required</strong></li><li><code>longitude</code> &lt;[number]&gt; Longitude between -180 and 180. <strong>required</strong></li><li><code>accuracy</code> &lt;[number]&gt; Non-negative accuracy value. Defaults to <code>0</code>.</li></ul></li><li>returns: &lt;[Promise]&gt;</li></ul><p>Sets the context&#x27;s geolocation. Passing <code>null</code> or <code>undefined</code> emulates position unavailable.</p><pre><code class="language-js">await browserContext.setGeolocation({latitude: 59.95, longitude: 30.31667});
</code></pre><blockquote><p><strong>NOTE</strong> Consider using <a href="#browsercontextgrantpermissionspermissions-options">browserContext.grantPermissions</a> to grant permissions for the browser context pages to read its geolocation.</p></blockquote><h2 id="browsercontextsethttpcredentialshttpcredentials">browserContext.setHTTPCredentials(httpCredentials)</h2><ul><li><code>httpCredentials</code> &lt;[null]|[Object]&gt;<ul><li><code>username</code> &lt;[string]&gt; <strong>required</strong></li><li><code>password</code> &lt;[string]&gt; <strong>required</strong></li></ul></li><li>returns: &lt;[Promise]&gt;</li></ul><p>Provide credentials for <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication">HTTP authentication</a>.</p><blockquote><p><strong>NOTE</strong> Browsers may cache credentials after successful authentication. Passing different credentials or passing <code>null</code> to disable authentication will be unreliable. To remove or replace credentials, create a new browser context instead.</p></blockquote><h2 id="browsercontextsetofflineoffline">browserContext.setOffline(offline)</h2><ul><li><code>offline</code> &lt;[boolean]&gt; Whether to emulate network being offline for the browser context.</li><li>returns: &lt;[Promise]&gt;</li></ul><h2 id="browsercontextunrouteurl-handler">browserContext.unroute(url[, handler])</h2><ul><li><code>url</code> &lt;[string]|[RegExp]|[function]([URL]):[boolean]&gt; A glob pattern, regex pattern or predicate receiving [URL] used to register a routing with <a href="#browsercontextrouteurl-handler">browserContext.route(url, handler)</a>.</li><li><code>handler</code> &lt;[function]([Route], [Request])&gt; Handler function used to register a routing with <a href="#browsercontextrouteurl-handler">browserContext.route(url, handler)</a>.</li><li>returns: &lt;[Promise]&gt;</li></ul><p>Removes a route created with <a href="#browsercontextrouteurl-handler">browserContext.route(url, handler)</a>. When <code>handler</code> is not specified, removes all routes for the <code>url</code>.</p><h2 id="browsercontextwaitforeventevent-optionsorpredicate">browserContext.waitForEvent(event[, optionsOrPredicate])</h2><ul><li><code>event</code> &lt;[string]&gt; Event name, same one would pass into <code>browserContext.on(event)</code>.</li><li><code>optionsOrPredicate</code> &lt;[Function]|[Object]&gt; Either a predicate that receives an event or an options object.<ul><li><code>predicate</code> &lt;[Function]&gt; receives the event data and resolves to truthy value when the waiting should resolve.</li><li><code>timeout</code> &lt;[number]&gt; maximum time to wait for in milliseconds. Defaults to <code>30000</code> (30 seconds). Pass <code>0</code> to disable timeout. The default value can be changed by using the <a href="#browsercontextsetdefaulttimeouttimeout">browserContext.setDefaultTimeout(timeout)</a>.</li></ul></li><li>returns: &lt;[Promise]&lt;[Object]&gt;&gt; Promise which resolves to the event data value.</li></ul><p>Waits for event to fire and passes its value into the predicate function. Resolves when the predicate returns truthy value. Will throw an error if the context closes before the event
is fired.</p><pre><code class="language-js">const context = await browser.newContext();
await context.grantPermissions([&#x27;geolocation&#x27;]);
</code></pre></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/api/class-browsercontext.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/playwright/docs/next/api/class-browser"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« class: Browser</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/playwright/docs/next/api/class-page"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">class: Page Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#event-close" class="table-of-contents__link">event: &#39;close&#39;</a></li><li><a href="#event-page" class="table-of-contents__link">event: &#39;page&#39;</a></li><li><a href="#browsercontextaddcookiescookies" class="table-of-contents__link">browserContext.addCookies(cookies)</a></li><li><a href="#browsercontextaddinitscriptscript-arg" class="table-of-contents__link">browserContext.addInitScript(script, arg)</a></li><li><a href="#browsercontextbrowser" class="table-of-contents__link">browserContext.browser()</a></li><li><a href="#browsercontextclearcookies" class="table-of-contents__link">browserContext.clearCookies()</a></li><li><a href="#browsercontextclearpermissions" class="table-of-contents__link">browserContext.clearPermissions()</a></li><li><a href="#browsercontextclose" class="table-of-contents__link">browserContext.close()</a></li><li><a href="#browsercontextcookiesurls" class="table-of-contents__link">browserContext.cookies(urls)</a></li><li><a href="#browsercontextexposebindingname-playwrightbinding-options" class="table-of-contents__link">browserContext.exposeBinding(name, playwrightBinding, options)</a></li><li><a href="#browsercontextexposefunctionname-playwrightfunction" class="table-of-contents__link">browserContext.exposeFunction(name, playwrightFunction)</a></li><li><a href="#browsercontextgrantpermissionspermissions" class="table-of-contents__link">browserContext.grantPermissions(permissions)</a></li><li><a href="#browsercontextnewpage" class="table-of-contents__link">browserContext.newPage()</a></li><li><a href="#browsercontextpages" class="table-of-contents__link">browserContext.pages()</a></li><li><a href="#browsercontextrouteurl-handler" class="table-of-contents__link">browserContext.route(url, handler)</a></li><li><a href="#browsercontextsetdefaultnavigationtimeouttimeout" class="table-of-contents__link">browserContext.setDefaultNavigationTimeout(timeout)</a></li><li><a href="#browsercontextsetdefaulttimeouttimeout" class="table-of-contents__link">browserContext.setDefaultTimeout(timeout)</a></li><li><a href="#browsercontextsetextrahttpheadersheaders" class="table-of-contents__link">browserContext.setExtraHTTPHeaders(headers)</a></li><li><a href="#browsercontextsetgeolocationgeolocation" class="table-of-contents__link">browserContext.setGeolocation(geolocation)</a></li><li><a href="#browsercontextsethttpcredentialshttpcredentials" class="table-of-contents__link">browserContext.setHTTPCredentials(httpCredentials)</a></li><li><a href="#browsercontextsetofflineoffline" class="table-of-contents__link">browserContext.setOffline(offline)</a></li><li><a href="#browsercontextunrouteurl-handler" class="table-of-contents__link">browserContext.unroute(url, handler)</a></li><li><a href="#browsercontextwaitforeventevent-optionsorpredicate" class="table-of-contents__link">browserContext.waitForEvent(event, optionsOrPredicate)</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/playwright/docs/intro">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/playwright/docs/api/playwright-module">API reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/playwright" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://aka.ms/playwright-slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/playwrightweb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/playwright/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Microsoft</div></div></div></footer></div>
<script src="/playwright/styles.e3676b2d.js"></script>
<script src="/playwright/runtime~main.a5e53a7b.js"></script>
<script src="/playwright/main.07a96fdf.js"></script>
<script src="/playwright/1.e3d59386.js"></script>
<script src="/playwright/2.50efd8bb.js"></script>
<script src="/playwright/339.77409837.js"></script>
<script src="/playwright/342.4e5598e3.js"></script>
<script src="/playwright/935f2afb.ea0d6419.js"></script>
<script src="/playwright/17896441.27de16b4.js"></script>
<script src="/playwright/efa29c67.8dc1c23b.js"></script>
</body>
</html>